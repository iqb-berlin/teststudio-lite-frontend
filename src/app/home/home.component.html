<div class="page-body">
  <!-- <div class="spinner-container" *ngIf="dataLoading">
    <mat-spinner></mat-spinner>
  </div> -->
  <div fxLayout="row wrap" fxLayoutAlign="center stretch" style="padding: 30px;">
    <mat-card fxFlex="0 0 400px" fxLayout="column" *ngIf="!mds.loginStatus">
      <!-- - - - - - - - - - - - - - - - - -->
      <form [formGroup]="loginForm" (ngSubmit)="login()">
        <mat-card-title>Anmelden</mat-card-title>
        <mat-card-content fxLayout="column">
          <mat-form-field class="full-width">
            <input matInput formControlName="name" placeholder="Anmeldename" (keyup.enter)="pw.focus()">
          </mat-form-field>
          <mat-form-field class="full-width">
            <input matInput #pw type="password" formControlName="pw" placeholder="Kennwort" (keyup.enter)="login()">
          </mat-form-field>
        </mat-card-content>
        <p *ngIf="errorMessage" class="error-message">{{errorMessage}}</p>
        <mat-card-actions>
          <button mat-raised-button type="submit" [disabled]="loginForm.invalid" color="primary">Weiter</button>
        </mat-card-actions>
      </form>
    </mat-card>

    <mat-card fxFlex="0 0 400px" fxLayout="column" *ngIf="mds.loginStatus">
      <mat-card-title>Arbeitsbereich wählen</mat-card-title>
      <mat-card-content>
        <div fxLayoutGap="10px" fxLayout="column">
          <p *ngIf="mds.loginStatus.workspaces.length === 0">
            Für diese Anmeldung wurden keine Arbeitsbereiche gefunden.
          </p>
          <button mat-raised-button color="primary" (click)="buttonGotoWorkspace(ws)"
            *ngFor="let ws of mds.loginStatus.workspaces">
              {{ws.name}}
          </button>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="foreground" *ngIf="mds.loginStatus.isSuperAdmin" [routerLink]="['/super-admin']">Nutzer/Arbeitsbereiche</button>
        <button mat-raised-button color="foreground" (click)="logout()">Abmelden</button>
      </mat-card-actions>
    </mat-card>

    <mat-card fxFlex="0 2 400px" fxLayout="column" class="status">
      <mat-card-title>IQB-Teststudio</mat-card-title>

      <!-- - - - - - - - - - - - - - - - - -->
      <mat-card-content>
        <app-intro></app-intro>
        <div *ngIf="mds.loginStatus">
          <ul>
            <li>angemeldet als: {{ mds.loginStatus.name }}</li>
            <li *ngIf="mds.loginStatus.isSuperAdmin">Berechtigung zum Ändern von Nutzerrechten und Arbeitsbereichen</li>
          </ul>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="foreground" [routerLink]="['/about']">Impressum/Datenschutz</button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
